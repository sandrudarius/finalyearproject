{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Home\\\\Desktop\\\\unitest\\\\dappazon\\\\src\\\\components\\\\Product.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { ethers } from 'ethers';\nimport { handleSubmit } from './Popup.jsx';\n// Components\nimport Rating from './Rating';\nimport close from '../assets/close.svg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst event = null; // or provide an actual event object here\nconst {\n  name,\n  address\n} = handleSubmit(event);\nconsole.log(`Name: ${name}, Address: ${address}`);\nconst Product = _ref => {\n  _s();\n  let {\n    item,\n    provider,\n    account,\n    dappazon,\n    togglePop\n  } = _ref;\n  const [order, setOrder] = useState(null);\n  const [hasBought, setHasBought] = useState(false);\n  const fetchDetails = async () => {\n    const events = await dappazon.queryFilter(\"Buy\");\n    const orders = events.filter(event => event.args.buyer === account && event.args.itemId.toString() === item.id.toString());\n    if (orders.length === 0) return;\n    const order = await dappazon.orders(account, orders[0].args.orderId);\n    setOrder(order);\n  };\n  const buyHandler = async () => {\n    const signer = await provider.getSigner();\n\n    // Buy item...\n    let transaction = await dappazon.connect(signer).buy(item.id, {\n      value: item.cost\n    });\n    await transaction.wait();\n    setHasBought(true);\n  };\n  useEffect(() => {\n    fetchDetails();\n  }, [hasBought]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product__details\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product__image\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: item.image,\n          alt: \"Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product__overview\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Rating, {\n          value: item.rating\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: item.address\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [ethers.utils.formatUnits(item.cost.toString(), 'ether'), \" ETH\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Overview\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [item.description, \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima rem, iusto, consectetur inventore quod soluta quos qui assumenda aperiam, eveniet doloribus commodi error modi eaque! Iure repudiandae temporibus ex? Optio!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product__order\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [ethers.utils.formatUnits(item.cost.toString(), 'ether'), \" ETH\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"FREE delivery \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 27\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: new Date(Date.now() + 345600000).toLocaleDateString(undefined, {\n              weekday: 'long',\n              month: 'long',\n              day: 'numeric'\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), item.stock > 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"In Stock.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Out of Stock.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"product__buy\",\n          onClick: buyHandler,\n          children: \"Buy Now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"small\", {\n            children: \"Ships from\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 14\n          }, this), \" Rolex\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"small\", {\n            children: \"Sold by\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 14\n          }, this), \" Rolex\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), order && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product__bought\",\n          children: [\"Item bought on \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: new Date(Number(order.time.toString() + '000')).toLocaleDateString(undefined, {\n              weekday: 'long',\n              hour: 'numeric',\n              minute: 'numeric',\n              second: 'numeric'\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: togglePop,\n        className: \"product__close\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: close,\n          alt: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n_s(Product, \"d6wx3FGM19eMk+ho8QwNO8YxwB4=\");\n_c = Product;\nexport default Product;\nvar _c;\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"names":["useEffect","useState","ethers","handleSubmit","Rating","close","event","name","address","console","log","Product","item","provider","account","dappazon","togglePop","order","setOrder","hasBought","setHasBought","fetchDetails","events","queryFilter","orders","filter","args","buyer","itemId","toString","id","length","orderId","buyHandler","signer","getSigner","transaction","connect","buy","value","cost","wait","image","rating","utils","formatUnits","description","Date","now","toLocaleDateString","undefined","weekday","month","day","stock","Number","time","hour","minute","second"],"sources":["C:/Users/Home/Desktop/unitest/dappazon/src/components/Product.js"],"sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { ethers } from 'ethers'\r\nimport { handleSubmit } from './Popup.jsx';\r\n// Components\r\nimport Rating from './Rating'\r\n\r\nimport close from '../assets/close.svg'\r\n\r\nconst event = null; // or provide an actual event object here\r\nconst { name, address } = handleSubmit(event);\r\nconsole.log(`Name: ${name}, Address: ${address}`);\r\n\r\n\r\n\r\nconst Product = ({ item, provider, account, dappazon, togglePop }) => {\r\n  const [order, setOrder] = useState(null)\r\n  const [hasBought, setHasBought] = useState(false)\r\n\r\n  const fetchDetails = async () => {\r\n    const events = await dappazon.queryFilter(\"Buy\")\r\n    const orders = events.filter(\r\n      (event) => event.args.buyer === account && event.args.itemId.toString() === item.id.toString()\r\n    )\r\n\r\n    if (orders.length === 0) return\r\n\r\n    const order = await dappazon.orders(account, orders[0].args.orderId)\r\n    setOrder(order)\r\n  }\r\n\r\n  const buyHandler = async () => {\r\n    const signer = await provider.getSigner()\r\n\r\n    // Buy item...\r\n    let transaction = await dappazon.connect(signer).buy(item.id, { value: item.cost })\r\n    await transaction.wait()\r\n\r\n    setHasBought(true)\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchDetails()\r\n  }, [hasBought])\r\n\r\n  return (\r\n    <div className=\"product\">\r\n      <div className=\"product__details\">\r\n        <div className=\"product__image\">\r\n          <img src={item.image} alt=\"Product\" />\r\n        </div>\r\n        <div className=\"product__overview\">\r\n          <h1>{item.name}</h1>\r\n\r\n          <Rating value={item.rating} />\r\n\r\n          <hr />\r\n\r\n          <p>{item.address}</p>\r\n\r\n          <h2>{ethers.utils.formatUnits(item.cost.toString(), 'ether')} ETH</h2>\r\n\r\n          <hr />\r\n\r\n          <h2>Overview</h2>\r\n\r\n          <p>\r\n            {item.description}\r\n\r\n            Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima rem, iusto,\r\n            consectetur inventore quod soluta quos qui assumenda aperiam, eveniet doloribus\r\n            commodi error modi eaque! Iure repudiandae temporibus ex? Optio!\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"product__order\">\r\n          <h1>{ethers.utils.formatUnits(item.cost.toString(), 'ether')} ETH</h1>\r\n\r\n          <p>\r\n            FREE delivery <br />\r\n            <strong>\r\n              {new Date(Date.now() + 345600000).toLocaleDateString(undefined, { weekday: 'long', month: 'long', day: 'numeric' })}\r\n            </strong>\r\n          </p>\r\n\r\n          {item.stock > 0 ? (\r\n            <p>In Stock.</p>\r\n          ) : (\r\n            <p>Out of Stock.</p>\r\n          )}\r\n\r\n          <button className='product__buy' onClick={buyHandler}>\r\n            Buy Now\r\n          </button>\r\n\r\n          <p><small>Ships from</small> Rolex</p>\r\n          <p><small>Sold by</small> Rolex</p>\r\n\r\n          {order && (\r\n            <div className='product__bought'>\r\n              Item bought on <br />\r\n              <strong>\r\n                {new Date(Number(order.time.toString() + '000')).toLocaleDateString(\r\n                  undefined,\r\n                  {\r\n                    weekday: 'long',\r\n                    hour: 'numeric',\r\n                    minute: 'numeric',\r\n                    second: 'numeric'\r\n                  })}\r\n              </strong>\r\n\r\n                  \r\n\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n\r\n        <button onClick={togglePop} className=\"product__close\">\r\n          <img src={close} alt=\"Close\" />\r\n        </button>\r\n      </div>\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default Product;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}